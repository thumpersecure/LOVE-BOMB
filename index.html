<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="love-bomb-variations.js"></script>
<title>You've Been Love Bombed üíå</title>
<meta name="description" content="Someone just sent you a love bomb ‚Äî a personal love telegram meant only for you. Open it.">
<meta property="og:title" content="You've Been Love Bombed üíå">
<meta property="og:description" content="Someone sent you a love bomb. Open it.">
<meta property="og:type" content="website">
<meta property="og:image" content="https://thumpersecure.github.io/LOVE-BOMB/assets/social-preview.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:url" content="https://thumpersecure.github.io/LOVE-BOMB/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="You've Been Love Bombed üíå">
<meta name="twitter:description" content="Someone sent you a love bomb. Open it.">
<meta name="twitter:image" content="https://thumpersecure.github.io/LOVE-BOMB/assets/social-preview.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500&family=Special+Elite&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  background:#0d0212;
  color:#fff;
  font-family:'Inter',sans-serif;
  overflow-x:hidden;
  min-height:100vh;
}

/* ‚îÄ‚îÄ Starfield Canvas ‚îÄ‚îÄ */
#star-canvas{
  position:fixed;top:0;left:0;width:100%;height:100%;
  z-index:0;pointer-events:none;
}

/* ‚îÄ‚îÄ Heart Canvas ‚îÄ‚îÄ */
#heart-canvas{
  position:fixed;top:0;left:0;width:100%;height:100%;
  z-index:1;pointer-events:none;
}

/* ‚îÄ‚îÄ Aurora Overlay ‚îÄ‚îÄ */
.aurora-overlay{
  position:fixed;top:0;left:0;width:100%;height:100%;
  z-index:0;pointer-events:none;
  background:
    radial-gradient(ellipse 80% 50% at 20% 80%, rgba(255,105,180,0.06) 0%, transparent 70%),
    radial-gradient(ellipse 60% 40% at 80% 20%, rgba(180,60,255,0.05) 0%, transparent 70%),
    radial-gradient(ellipse 70% 60% at 50% 50%, rgba(255,20,147,0.03) 0%, transparent 70%);
  animation:aurora-shift 12s ease-in-out infinite alternate;
}
@keyframes aurora-shift{
  0%{opacity:0.6;filter:hue-rotate(0deg)}
  50%{opacity:1;filter:hue-rotate(15deg)}
  100%{opacity:0.7;filter:hue-rotate(-10deg)}
}

/* ‚îÄ‚îÄ Content Overlay ‚îÄ‚îÄ */
.content{
  position:relative;z-index:2;
  max-width:720px;margin:0 auto;padding:40px 24px;
  text-align:center;
}

/* ‚îÄ‚îÄ Sections ‚îÄ‚îÄ */
.section{
  margin:80px 0;
  opacity:0;transform:translateY(40px);
  transition:opacity 1.2s ease,transform 1.2s ease;
}
.section.visible{opacity:1;transform:translateY(0)}
.section#s1{margin-top:15vh}
.section#variation-picker{margin-top:10vh}

/* ‚îÄ‚îÄ Typography ‚îÄ‚îÄ */
h1{
  font-family:'Playfair Display',serif;
  font-size:clamp(2.4rem,6vw,4rem);
  font-weight:700;
  line-height:1.15;
  margin-bottom:16px;
  background:linear-gradient(135deg,#fff 0%,#ffb6c1 40%,#ff69b4 70%,#fff 100%);
  background-size:200% 200%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:shimmer-text 4s ease-in-out infinite;
}
@keyframes shimmer-text{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
h2{
  font-family:'Playfair Display',serif;
  font-size:clamp(1.6rem,4vw,2.4rem);
  font-weight:400;font-style:italic;
  color:#ffb6c1;
  margin-bottom:24px;
}
p,.quote{
  font-size:clamp(1rem,2.5vw,1.15rem);
  line-height:1.8;
  color:#e0c0d0;
  font-weight:300;
  margin-bottom:20px;
}
.quote{
  border-left:3px solid #ff69b4;
  padding:16px 24px;
  margin:32px auto;
  max-width:520px;
  text-align:left;
  font-style:italic;
  background:rgba(255,105,180,0.05);
  border-radius:0 12px 12px 0;
  position:relative;
}
.quote::after{
  content:'';
  position:absolute;top:0;left:0;width:3px;height:100%;
  background:linear-gradient(180deg,#ff69b4,#c71585,#ff69b4);
  animation:quote-glow 3s ease-in-out infinite;
}
@keyframes quote-glow{
  0%,100%{box-shadow:0 0 8px rgba(255,105,180,0.4)}
  50%{box-shadow:0 0 20px rgba(255,105,180,0.8)}
}

/* ‚îÄ‚îÄ Telegram Frame ‚îÄ‚îÄ */
.telegram-frame{
  border:2px solid rgba(255,105,180,0.3);
  border-radius:20px;
  padding:40px 32px;
  margin:32px auto;
  max-width:560px;
  background:rgba(255,105,180,0.03);
  backdrop-filter:blur(12px);
  position:relative;
  animation:frame-glow 5s ease-in-out infinite;
}
@keyframes frame-glow{
  0%,100%{box-shadow:0 0 15px rgba(255,105,180,0.08),inset 0 0 15px rgba(255,105,180,0.03)}
  50%{box-shadow:0 0 30px rgba(255,105,180,0.15),inset 0 0 30px rgba(255,105,180,0.06)}
}
.telegram-frame::before{
  content:'LOVE BOMB';
  position:absolute;top:-14px;left:50%;transform:translateX(-50%);
  background:#0d0212;
  padding:0 16px;
  font-family:'Special Elite',cursive;
  font-size:0.85rem;
  letter-spacing:4px;
  color:#ff69b4;
  text-shadow:0 0 10px rgba(255,105,180,0.5);
}
.telegram-header{
  font-family:'Special Elite',cursive;
  font-size:0.85rem;
  color:#a07888;
  text-align:left;
  margin-bottom:20px;
  line-height:2;
  letter-spacing:1px;
}
.telegram-header span{
  color:#ffb6c1;
}
.telegram-body{
  font-family:'Playfair Display',serif;
  font-size:clamp(1.1rem,3vw,1.35rem);
  color:#fff;
  line-height:1.9;
  text-align:left;
  font-style:italic;
}
.telegram-body .love-word{
  color:#ff69b4;
  font-weight:700;
  font-style:normal;
  text-shadow:0 0 8px rgba(255,105,180,0.3);
}
.telegram-stamp{
  margin-top:24px;
  text-align:right;
  font-family:'Special Elite',cursive;
  font-size:0.8rem;
  color:#a07888;
  letter-spacing:2px;
}

/* ‚îÄ‚îÄ Love Affirmation Cards ‚îÄ‚îÄ */
.affirmation-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
  max-width:520px;
  margin:32px auto;
}
.affirmation-card{
  background:rgba(255,105,180,0.04);
  border:1px solid rgba(255,105,180,0.15);
  border-radius:16px;
  padding:20px 16px;
  transition:all 0.4s ease;
  position:relative;
  overflow:hidden;
}
.affirmation-card::before{
  content:'';
  position:absolute;top:-50%;left:-50%;width:200%;height:200%;
  background:radial-gradient(circle,rgba(255,105,180,0.08) 0%,transparent 60%);
  opacity:0;
  transition:opacity 0.5s ease;
}
.affirmation-card:hover::before{opacity:1}
.affirmation-card:hover{
  border-color:rgba(255,105,180,0.4);
  transform:translateY(-2px);
  box-shadow:0 8px 24px rgba(255,105,180,0.1);
}
.affirmation-emoji{font-size:1.6rem;margin-bottom:8px;display:block}
.affirmation-text{
  font-family:'Playfair Display',serif;
  font-size:0.95rem;
  color:#e0c0d0;
  font-style:italic;
  line-height:1.5;
}

/* ‚îÄ‚îÄ Glow Equation (small, subtle) ‚îÄ‚îÄ */
.equation{
  font-family:'Playfair Display',serif;
  font-size:clamp(1.4rem,3.5vw,2rem);
  font-weight:700;
  color:#fff;
  text-shadow:
    0 0 20px rgba(255,105,180,0.8),
    0 0 40px rgba(255,105,180,0.5),
    0 0 80px rgba(255,105,180,0.3);
  margin:24px 0;
  animation:glow-pulse 3s ease-in-out infinite;
}
@keyframes glow-pulse{
  0%,100%{text-shadow:0 0 20px rgba(255,105,180,0.8),0 0 40px rgba(255,105,180,0.5),0 0 80px rgba(255,105,180,0.3)}
  50%{text-shadow:0 0 30px rgba(255,105,180,1),0 0 60px rgba(255,105,180,0.7),0 0 120px rgba(255,105,180,0.5)}
}

/* ‚îÄ‚îÄ Big Love Declaration ‚îÄ‚îÄ */
.love-declaration{
  font-family:'Playfair Display',serif;
  font-size:clamp(2rem,5.5vw,3.6rem);
  font-weight:700;
  background:linear-gradient(135deg,#ff69b4,#ff1493,#c71585,#ff69b4);
  background-size:300% 300%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:love-gradient 4s ease-in-out infinite;
  text-shadow:none;
  margin:40px 0;
  filter:drop-shadow(0 0 20px rgba(255,105,180,0.4));
}
@keyframes love-gradient{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ‚îÄ‚îÄ Counter ‚îÄ‚îÄ */
.counter-box{
  display:inline-flex;align-items:center;gap:10px;
  background:rgba(255,105,180,0.08);
  border:1px solid rgba(255,105,180,0.2);
  border-radius:40px;
  padding:10px 24px;
  margin:20px 0;
  font-family:'Special Elite',cursive;
  font-size:0.95rem;
  color:#ffb6c1;
  letter-spacing:1px;
}
.counter-box .counter-num{
  color:#ff69b4;
  font-size:1.1rem;
  font-weight:700;
  min-width:50px;
}
.counter-pulse{
  width:8px;height:8px;border-radius:50%;
  background:#ff69b4;
  animation:counter-blink 2s ease-in-out infinite;
}
@keyframes counter-blink{
  0%,100%{opacity:0.3;box-shadow:none}
  50%{opacity:1;box-shadow:0 0 8px #ff69b4}
}

/* ‚îÄ‚îÄ Emphasis ‚îÄ‚îÄ */
.love-word{color:#ff69b4;font-weight:500;text-shadow:0 0 6px rgba(255,105,180,0.2)}
em{color:#ffb6c1}
strong{color:#fff;font-weight:500}

/* ‚îÄ‚îÄ Heart Divider ‚îÄ‚îÄ */
.heart-divider{
  margin:48px auto;font-size:1.4rem;
  letter-spacing:12px;color:#ff69b4;
  opacity:0.6;
  animation:divider-twinkle 4s ease-in-out infinite;
}
@keyframes divider-twinkle{
  0%,100%{opacity:0.4;letter-spacing:12px}
  50%{opacity:0.8;letter-spacing:16px}
}

/* ‚îÄ‚îÄ Video Container ‚îÄ‚îÄ */
.video-section{
  background:rgba(255,105,180,0.08);
  border:1px solid rgba(255,105,180,0.2);
  border-radius:24px;
  padding:40px 32px;
  margin:48px auto;
  max-width:480px;
  backdrop-filter:blur(20px);
  position:relative;
  overflow:hidden;
}
.video-section::before{
  content:'';
  position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;
  background:linear-gradient(135deg,rgba(255,105,180,0.2),transparent,rgba(180,60,255,0.2));
  border-radius:25px;
  z-index:-1;
  animation:video-border-glow 4s ease-in-out infinite alternate;
}
@keyframes video-border-glow{
  0%{opacity:0.3}
  100%{opacity:0.8}
}
.video-section h3{
  font-family:'Playfair Display',serif;
  font-size:1.3rem;
  color:#ffb6c1;
  margin-bottom:8px;
}
.video-section .subtitle{
  font-size:0.85rem;color:#c090a8;margin-bottom:24px;
}
.yt-container{
  margin-top:24px;border-radius:16px;overflow:hidden;
  display:none;
  box-shadow:0 0 40px rgba(255,105,180,0.2);
}
.yt-container.active{display:block;animation:fade-in 0.8s ease}
.yt-container iframe{width:100%;aspect-ratio:16/9;border:none;display:block}
@keyframes fade-in{from{opacity:0;transform:scale(0.95)}to{opacity:1;transform:scale(1)}}

/* ‚îÄ‚îÄ Tap to hear overlay ‚îÄ‚îÄ */
.tap-to-hear{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  background:rgba(255,105,180,0.15);
  border:1px solid rgba(255,105,180,0.3);
  border-radius:50%;
  width:80px;height:80px;
  display:flex;align-items:center;justify-content:center;
  font-size:1.8rem;
  cursor:pointer;
  z-index:10;
  animation:tap-pulse 2s ease-in-out infinite;
  transition:all 0.3s ease;
  backdrop-filter:blur(8px);
}
.tap-to-hear:hover{
  background:rgba(255,105,180,0.3);
  transform:translate(-50%,-50%) scale(1.1);
}
.tap-to-hear.hidden{display:none}
@keyframes tap-pulse{
  0%,100%{box-shadow:0 0 10px rgba(255,105,180,0.3)}
  50%{box-shadow:0 0 30px rgba(255,105,180,0.6)}
}

/* ‚îÄ‚îÄ Unmute Overlay (ad-aware countdown) ‚îÄ‚îÄ */
.unmute-overlay{
  position:absolute;bottom:12px;right:12px;
  z-index:10;
}
.unmute-btn{
  padding:10px 20px;
  background:rgba(13,2,18,0.9);
  border:1px solid rgba(255,105,180,0.5);
  border-radius:24px;
  color:#ffb6c1;
  font-family:'Inter',sans-serif;
  font-size:0.9rem;
  cursor:pointer;
  transition:all 0.3s ease;
  display:flex;align-items:center;gap:8px;
}
.unmute-btn:hover:not(:disabled){
  background:rgba(255,105,180,0.3);
  border-color:#ff69b4;
  color:#fff;
}
.unmute-btn:disabled{
  cursor:not-allowed;
  opacity:0.85;
}
.unmute-btn.ready{
  background:rgba(255,105,180,0.2);
  animation:unmute-ready-glow 1.5s ease-in-out infinite;
}
@keyframes unmute-ready-glow{
  0%,100%{box-shadow:0 0 8px rgba(255,105,180,0.3)}
  50%{box-shadow:0 0 20px rgba(255,105,180,0.6)}
}
.unmute-btn .unmute-label{white-space:nowrap}

/* ‚îÄ‚îÄ Share ‚îÄ‚îÄ */
.share-btn{
  display:inline-flex;align-items:center;gap:10px;
  background:linear-gradient(135deg,#ff69b4,#ff1493,#c71585);
  border:none;
  color:#fff;border-radius:60px;
  padding:16px 36px;font-size:1.05rem;
  font-family:'Inter',sans-serif;font-weight:500;
  cursor:pointer;transition:all 0.3s ease;
  box-shadow:0 0 30px rgba(255,105,180,0.4),0 4px 20px rgba(0,0,0,0.3);
  animation:btn-breathe 2.5s ease-in-out infinite;
  position:relative;
  overflow:hidden;
}
.share-btn::before{
  content:'';
  position:absolute;top:-50%;left:-50%;width:200%;height:200%;
  background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,0.1) 50%,transparent 70%);
  animation:btn-shine 3s ease-in-out infinite;
}
@keyframes btn-shine{
  0%{transform:translateX(-100%) rotate(45deg)}
  100%{transform:translateX(100%) rotate(45deg)}
}
.share-btn:hover{
  transform:scale(1.05);
  box-shadow:0 0 50px rgba(255,105,180,0.6),0 6px 30px rgba(0,0,0,0.4);
}
@keyframes btn-breathe{
  0%,100%{box-shadow:0 0 30px rgba(255,105,180,0.4),0 4px 20px rgba(0,0,0,0.3)}
  50%{box-shadow:0 0 50px rgba(255,105,180,0.6),0 4px 20px rgba(0,0,0,0.3)}
}

.share-link-btn{
  display:inline-flex;align-items:center;gap:10px;
  background:transparent;
  border:2px solid rgba(255,105,180,0.5);
  color:#ffb6c1;border-radius:60px;
  padding:14px 32px;font-size:1rem;
  font-family:'Inter',sans-serif;font-weight:400;
  cursor:pointer;transition:all 0.3s ease;
}
.share-link-btn:hover{
  background:rgba(255,105,180,0.15);
  border-color:#ff69b4;color:#fff;
  box-shadow:0 0 30px rgba(255,105,180,0.2);
}

/* ‚îÄ‚îÄ Variation Picker ‚îÄ‚îÄ */
.variation-btns{
  display:flex;flex-wrap:wrap;gap:8px;justify-content:center;
}
.variation-btn{
  padding:8px 16px;
  font-size:0.85rem;
  background:rgba(255,105,180,0.1);
  border:1px solid rgba(255,105,180,0.3);
  border-radius:20px;
  color:#ffb6c1;
  cursor:pointer;
  transition:all 0.25s ease;
  font-family:'Inter',sans-serif;
}
.variation-btn:hover{
  background:rgba(255,105,180,0.2);
  border-color:#ff69b4;
  color:#fff;
}
.variation-btn.active{
  background:linear-gradient(135deg,rgba(255,105,180,0.4),rgba(255,20,147,0.3));
  border-color:#ff69b4;
  color:#fff;
}

/* ‚îÄ‚îÄ Floating Sparkles ‚îÄ‚îÄ */
.sparkle{
  position:fixed;pointer-events:none;z-index:3;
  width:4px;height:4px;border-radius:50%;
  background:#ff69b4;
  animation:sparkle-float 3s ease-out forwards;
}
@keyframes sparkle-float{
  0%{opacity:1;transform:scale(1) translateY(0)}
  100%{opacity:0;transform:scale(0) translateY(-60px)}
}

/* ‚îÄ‚îÄ Magical Shimmer on visible sections ‚îÄ‚îÄ */
.section.visible .telegram-frame,
.section.visible .affirmation-card{
  animation:enchanted-entrance 1s ease forwards;
}
@keyframes enchanted-entrance{
  0%{filter:brightness(1)}
  30%{filter:brightness(1.2)}
  100%{filter:brightness(1)}
}

/* ‚îÄ‚îÄ Floating Magical Orbs ‚îÄ‚îÄ */
.magic-orb{
  position:fixed;pointer-events:none;z-index:1;
  border-radius:50%;
  background:radial-gradient(circle,rgba(255,105,180,0.3) 0%,transparent 70%);
  animation:orb-float 8s ease-in-out infinite;
}
@keyframes orb-float{
  0%,100%{transform:translate(0,0) scale(1);opacity:0.3}
  25%{transform:translate(30px,-20px) scale(1.2);opacity:0.5}
  50%{transform:translate(-20px,-40px) scale(0.9);opacity:0.4}
  75%{transform:translate(10px,-10px) scale(1.1);opacity:0.3}
}

/* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
@media(max-width:600px){
  .content{padding:24px 16px}
  .section:first-child{margin-top:10vh}
  .telegram-frame{padding:28px 20px}
  .video-section{padding:28px 20px}
  .share-btn{padding:14px 28px;font-size:0.95rem}
  .variation-btn{padding:6px 12px;font-size:0.8rem}
  .affirmation-grid{grid-template-columns:1fr;gap:12px}
}

/* ‚îÄ‚îÄ Philly LOVE Sculpture ‚îÄ‚îÄ */
.love-sculpture-wrap{
  display:none;
  margin:30px auto;
  text-align:center;
}
.love-sculpture-wrap.active{
  display:block;
  animation:sculpture-entrance 1s ease forwards;
}
@keyframes sculpture-entrance{
  0%{opacity:0;transform:scale(0.4) rotate(-15deg)}
  60%{opacity:1;transform:scale(1.05) rotate(2deg)}
  100%{opacity:1;transform:scale(1) rotate(0deg)}
}
.love-sculpture{
  display:inline-grid;
  grid-template-columns:1fr 1fr;
  font-family:Georgia,'Times New Roman',serif;
  font-weight:900;
  font-size:clamp(3.5rem,12vw,7rem);
  line-height:0.82;
  letter-spacing:-0.03em;
  color:#ff1493;
  text-shadow:0 0 20px rgba(255,20,147,0.5),0 0 40px rgba(255,20,147,0.3);
  animation:sculpture-glow 3s ease-in-out infinite;
}
@keyframes sculpture-glow{
  0%,100%{filter:drop-shadow(0 0 15px rgba(255,20,147,0.4))}
  50%{filter:drop-shadow(0 0 35px rgba(255,20,147,0.8))}
}
.love-sculpture span{
  display:flex;align-items:center;justify-content:center;
}
.love-sculpture .sculpture-o{
  transform:rotate(-28deg) translate(-4%,10%);
  color:#ff69b4;
}

/* ‚îÄ‚îÄ Rainbow overrides for LGBTQ ‚îÄ‚îÄ */
.rainbow-active .heart-divider{
  background:linear-gradient(90deg,#e40303,#ff8c00,#ffed00,#008026,#004dff,#750787);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  opacity:1;
}
.rainbow-active .telegram-frame{
  border-color:rgba(255,100,0,0.25);
  animation:rainbow-frame-glow 6s linear infinite;
}
@keyframes rainbow-frame-glow{
  0%{box-shadow:0 0 20px rgba(228,3,3,0.15),inset 0 0 15px rgba(228,3,3,0.04)}
  17%{box-shadow:0 0 20px rgba(255,140,0,0.15),inset 0 0 15px rgba(255,140,0,0.04)}
  33%{box-shadow:0 0 20px rgba(255,237,0,0.15),inset 0 0 15px rgba(255,237,0,0.04)}
  50%{box-shadow:0 0 20px rgba(0,128,38,0.15),inset 0 0 15px rgba(0,128,38,0.04)}
  67%{box-shadow:0 0 20px rgba(0,77,255,0.15),inset 0 0 15px rgba(0,77,255,0.04)}
  83%{box-shadow:0 0 20px rgba(117,7,135,0.15),inset 0 0 15px rgba(117,7,135,0.04)}
  100%{box-shadow:0 0 20px rgba(228,3,3,0.15),inset 0 0 15px rgba(228,3,3,0.04)}
}
.rainbow-active .telegram-frame::before{
  background:linear-gradient(90deg,#e40303,#ff8c00,#ffed00,#008026,#004dff,#750787);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}
.rainbow-active .love-word{
  background:linear-gradient(90deg,#e40303,#ff8c00,#ffed00,#008026,#004dff,#750787);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  text-shadow:none;
}
.rainbow-active .love-declaration{
  background:linear-gradient(135deg,#e40303,#ff8c00,#ffed00,#008026,#004dff,#750787,#e40303);
  background-size:400% 400%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:rainbow-gradient 4s linear infinite;
  filter:drop-shadow(0 0 20px rgba(255,140,0,0.3));
}
@keyframes rainbow-gradient{
  0%{background-position:0% 50%}
  100%{background-position:400% 50%}
}
.rainbow-active .affirmation-card{
  border-color:rgba(255,140,0,0.2);
}
.rainbow-active .affirmation-card:hover{
  border-color:rgba(0,128,38,0.5);
  box-shadow:0 8px 24px rgba(0,77,255,0.1);
}

/* ‚îÄ‚îÄ Detonation Flash ‚îÄ‚îÄ */
.detonate-flash{
  position:fixed;top:0;left:0;width:100%;height:100%;
  z-index:9999;pointer-events:none;
  background:radial-gradient(circle at center,rgba(255,20,147,0.35) 0%,rgba(255,105,180,0.15) 40%,transparent 70%);
  animation:detonate-fade 1.8s ease-out forwards;
}
@keyframes detonate-fade{
  0%{opacity:1;transform:scale(0.8)}
  20%{opacity:1;transform:scale(1.2)}
  100%{opacity:0;transform:scale(2)}
}

/* ‚îÄ‚îÄ Song info below video ‚îÄ‚îÄ */
.song-info{
  font-family:'Special Elite',cursive;
  font-size:0.95rem;
  color:#ff69b4;
  letter-spacing:1px;
  margin-top:12px;
  text-shadow:0 0 8px rgba(255,105,180,0.3);
}

/* ‚îÄ‚îÄ Breathing Heart ‚Äî emotional pacing between sections ‚îÄ‚îÄ */
.breathing-heart{
  display:inline-block;
  font-size:2.4rem;
  animation:heart-breathe 1.8s ease-in-out infinite;
  filter:drop-shadow(0 0 12px rgba(255,105,180,0.5));
  margin:16px 0;
}
@keyframes heart-breathe{
  0%,100%{transform:scale(1);opacity:0.7}
  15%{transform:scale(1.15);opacity:1}
  30%{transform:scale(1);opacity:0.8}
  45%{transform:scale(1.08);opacity:0.95}
  60%{transform:scale(1);opacity:0.7}
}

/* ‚îÄ‚îÄ Love Ripple Effect ‚îÄ‚îÄ */
.love-ripple-container{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  height:120px;
  margin:24px auto;
}
.love-ripple{
  position:absolute;
  border-radius:50%;
  border:1px solid rgba(255,105,180,0.3);
  animation:ripple-expand 3s ease-out infinite;
}
.love-ripple:nth-child(2){animation-delay:1s}
.love-ripple:nth-child(3){animation-delay:2s}
@keyframes ripple-expand{
  0%{width:20px;height:20px;opacity:0.8}
  100%{width:200px;height:200px;opacity:0}
}
.love-ripple-heart{
  position:relative;z-index:1;
  font-size:2rem;
  animation:heart-breathe 1.8s ease-in-out infinite;
}

/* ‚îÄ‚îÄ Timestamp glow ‚îÄ‚îÄ */
.love-timestamp{
  font-family:'Special Elite',cursive;
  font-size:0.8rem;
  color:#a07888;
  letter-spacing:2px;
  margin-top:12px;
  opacity:0.7;
}

/* ‚îÄ‚îÄ Haptic pulse indicator ‚îÄ‚îÄ */
.haptic-pulse{
  position:fixed;bottom:20px;right:20px;
  width:12px;height:12px;border-radius:50%;
  background:#ff69b4;
  z-index:50;pointer-events:none;
  opacity:0;
  transition:opacity 0.3s;
}
.haptic-pulse.active{
  opacity:1;
  animation:haptic-beat 0.15s ease-out;
}
@keyframes haptic-beat{
  0%{transform:scale(1);box-shadow:0 0 0 0 rgba(255,105,180,0.6)}
  100%{transform:scale(2);box-shadow:0 0 0 12px rgba(255,105,180,0)}
}
</style>
</head>
<body>

<canvas id="star-canvas"></canvas>
<div class="aurora-overlay"></div>
<canvas id="heart-canvas"></canvas>
<div class="haptic-pulse" id="haptic-pulse"></div>

<div class="content">

  <!-- ‚ïê‚ïê‚ïê VARIATION PICKER ‚ïê‚ïê‚ïê -->
  <div class="section" id="variation-picker" style="margin-bottom:24px">
    <p style="font-size:0.85rem;color:#a07888;margin-bottom:12px">Choose your love bomb:</p>
    <div class="variation-btns" id="variation-btns"></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê HOOK ‚ïê‚ïê‚ïê (deeply personal love) -->
  <div class="section" id="s1">
    <h1>Someone just sent you<br>a love bomb.</h1>
    <p>Not the scary kind. The kind that wraps around you like a warm blanket on a cold night and whispers: <em>you matter.</em></p>
    <p>Someone thought of <strong>you</strong>. Out of everyone in their world, they chose you. Right now, in this moment, <span class="love-word">you are the reason this page exists.</span></p>
    <p>This was made for you. Every word. Every heart. Every glow. <strong>Scroll down and feel it.</strong></p>
    <p id="variation-hook-sub" style="font-size:0.95rem;color:#c090a8;margin-top:16px"></p>

    <!-- Philly LOVE Sculpture (hidden unless philly variation) -->
    <div class="love-sculpture-wrap" id="love-sculpture">
      <div class="love-sculpture">
        <span>L</span><span class="sculpture-o">O</span>
        <span>V</span><span>E</span>
      </div>
    </div>

    <p style="font-size:0.9rem;color:#a07888;margin-top:40px">scroll down</p>
    <p style="font-size:1.4rem;color:#ff69b4;animation:bounce 2s infinite">&#8595;</p>
  </div>

  <!-- ‚ïê‚ïê‚ïê THE TELEGRAM ‚ïê‚ïê‚ïê (the heart of the love bomb) -->
  <div class="section" id="s2">
    <div class="telegram-frame">
      <div class="telegram-header">
        FROM: <span id="var-from">Someone who loves you</span><br>
        TO: <span id="var-to">You, right now, reading this</span><br>
        RE: <span id="var-re">Things you need to hear</span>
      </div>
      <div class="telegram-body">
        You are <span class="love-word">loved</span>. Not in some vague, distant, "everyone is loved" way ‚Äî right here, right now, by the specific person who sent you this. They thought of <strong>you</strong>. They chose <strong>you</strong>. They wanted <strong>you</strong> to feel something real today.
        <br><br>
        You matter more than you let yourself believe. Your laugh makes rooms lighter. Your kindness leaves marks on people you'll never know about. The way you care, the way you try, even the way you doubt yourself ‚Äî it all means you have a heart that <span class="love-word">feels deeply</span>. That's not weakness. That's your superpower.
        <br><br>
        If no one's told you lately: <span class="love-word">you are enough</span>. Exactly as you are. Not when you fix that thing. Not when you achieve that goal. Not someday. <em>Right now.</em> You ‚Äî imperfect, beautiful, trying-your-best you ‚Äî are enough.
        <br><br>
        The person who sent this didn't do it by accident. They did it because you crossed their mind and their heart said: <em>"They need to know."</em> So here it is. You're seen. You're valued. You're cherished. <span class="love-word">You are loved.</span>
        <br><br>
        Hold onto this feeling. It's real. And when you're ready ‚Äî pass it on to someone who needs to hear it too.
      </div>
      <div class="telegram-stamp">SENT WITH ALL MY LOVE &#10084;</div>
    </div>
  </div>

  <div class="heart-divider">&#10084; &#10084; &#10084; &#10084; &#10084;</div>

  <!-- ‚ïê‚ïê‚ïê LOVE AFFIRMATIONS ‚ïê‚ïê‚ïê (making them feel truly loved) -->
  <div class="section" id="s-affirmations">
    <h2>In case you needed reminders</h2>
    <p>The person who sent this wants you to carry these with you today:</p>
    <div class="affirmation-grid">
      <div class="affirmation-card">
        <span class="affirmation-emoji">üíó</span>
        <span class="affirmation-text">You make the world gentler just by being in it.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">‚ú®</span>
        <span class="affirmation-text">Someone's favorite memory has you in it.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">üåô</span>
        <span class="affirmation-text">You've gotten through every hard day so far. That's a perfect record.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">üíå</span>
        <span class="affirmation-text">Someone out there is grateful you exist. That someone sent you this.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">ü¶ã</span>
        <span class="affirmation-text">You don't have to earn love. It's already yours.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">üî•</span>
        <span class="affirmation-text">Your heart is brave. Even when it doesn't feel that way.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">üåä</span>
        <span class="affirmation-text">You've made someone smile today without even knowing it.</span>
      </div>
      <div class="affirmation-card">
        <span class="affirmation-emoji">üïäÔ∏è</span>
        <span class="affirmation-text">The people who truly know you are the luckiest people alive.</span>
      </div>
    </div>
    <div class="breathing-heart">&#10084;&#65039;</div>
  </div>

  <div class="heart-divider">&#10084; &#10084; &#10084; &#10084; &#10084;</div>

  <!-- ‚ïê‚ïê‚ïê A LOVE LETTER ‚ïê‚ïê‚ïê (deepening the emotional connection) -->
  <div class="section" id="s-letter">
    <h2>A quiet truth from whoever sent this</h2>
    <div class="love-ripple-container">
      <div class="love-ripple"></div>
      <div class="love-ripple"></div>
      <div class="love-ripple"></div>
      <span class="love-ripple-heart">&#10084;&#65039;</span>
    </div>
    <div class="quote">
      I don't say it enough. Nobody does. But you've changed my life in ways I don't even know how to articulate. The way you show up for people. The way you carry so much and still find a way to be kind. The way you light up when you talk about things you love. I notice. I've always noticed.
      <br><br>
      So instead of waiting for the perfect moment, I'm sending you this. Because you deserve to know ‚Äî today, not someday ‚Äî that <strong>you are deeply, truly, unmistakably loved.</strong> Not for what you do. For who you are.
    </div>
    <p>They meant every word of that. Read it again if you need to. Let it sink in. <em>That person loves you.</em></p>
    <div class="love-timestamp" id="love-sent-time"></div>
  </div>

  <div class="heart-divider">&#10084; &#10084; &#10084; &#10084; &#10084;</div>

  <!-- ‚ïê‚ïê‚ïê THE TRUTH ‚Äî personal love focus ‚ïê‚ïê‚ïê -->
  <div class="section" id="s4">
    <h2>You already know this is true</h2>
    <p>Think of someone who matters to you. A friend. A family member. The person you haven't called in too long but still think about at 2am.</p>
    <div class="quote">
      Would they feel better or worse<br>if they knew you were thinking of them right now?
    </div>
    <p>The answer has never once been <em>"worse."</em></p>
    <p>That's the whole secret of a love bomb. <span class="love-word">Love works.</span> When you send it. When you receive it. Between two people. No conditions, no fine print. It just <em>works.</em></p>
    <div class="love-declaration">You Are Loved</div>
  </div>

  <div class="heart-divider">&#10084; &#10084; &#10084; &#10084; &#10084;</div>

  <!-- ‚ïê‚ïê‚ïê VIDEO ‚ïê‚ïê‚ïê -->
  <div class="section" id="s5">
    <div class="video-section">
      <h3>Let this play while you take it in.</h3>
      <div class="subtitle">The person who sent this picked this song for you.</div>
      <div class="song-info" id="song-info"></div>
      <div class="yt-container" id="yt-container">
        <div id="yt-player"></div>
        <div class="unmute-overlay" id="unmute-overlay">
          <button class="unmute-btn" id="unmute-btn" disabled>
            <span class="unmute-icon">üîá</span>
            <span class="unmute-label" id="unmute-label">Music in <span id="unmute-countdown">30</span>s</span>
          </button>
        </div>
      </div>
      <div class="tap-to-hear" id="tap-to-hear" title="Tap for sound">üîä</div>
    </div>
    <p style="margin-top:24px;font-size:0.95rem;color:#a07888">Let the music play. Watch the hearts. <span class="love-word">Feel the love.</span></p>
  </div>

  <div class="heart-divider">&#10084; &#10084; &#10084; &#10084; &#10084;</div>

  <!-- ‚ïê‚ïê‚ïê HOW IT SPREADS ‚ïê‚ïê‚ïê -->
  <div class="section" id="s6">
    <h2>How a love bomb works</h2>
    <p>Someone sent this to you because they <span class="love-word">love you</span>. They thought of you. They chose you. That's the whole trick ‚Äî there is no trick. Just love, delivered.</p>
    <p>One person thinks of someone they love. They send this page. That person reads it, <em>feels it</em>, and sends it to someone <strong>they</strong> love. And on and on. Love gets passed forward ‚Äî one heart at a time.</p>
    <div class="quote">
      One person sends love. Another person receives it.<br>
      Then they send it forward. That's how love grows.
    </div>
    <div class="counter-box">
      <div class="counter-pulse"></div>
      <span>love bombs sent:</span>
      <span class="counter-num" id="love-counter">‚Äî</span>
    </div>
    <p style="font-size:0.9rem;color:#806070;margin-top:16px" id="variation-world-note">And when enough people send love to each other ‚Äî the whole world quietly gets a little more peaceful.</p>
    <p style="font-size:0.8rem;color:#604050;margin-top:8px;font-style:italic">more love = more world peace</p>
  </div>

  <div class="heart-divider">&#10084; &#10084; &#10084; &#10084; &#10084;</div>

  <!-- ‚ïê‚ïê‚ïê SEND ONE ‚ïê‚ïê‚ïê -->
  <div class="section" id="s7">
    <h2>Now it's your turn</h2>
    <p>You've been love bombed. You felt it. That warmth in your chest right now ‚Äî that's real. You can't un-feel it.</p>
    <p>Close your eyes for a second. Think of <strong>one person</strong> who needs to hear that they're loved today. A friend who's been quiet lately. A parent who gave everything. A partner. A sibling. Someone you haven't reached out to in too long. <span class="love-word">That person.</span> The one who just popped into your head without you even trying.</p>
    <p>That's your heart telling you something. <em>Listen to it.</em></p>
    <p>Send them this. No explanation needed ‚Äî the page does the talking. They'll open it, feel exactly what you just felt, and know that <strong>someone in this world loves them</strong>. And that someone is you.</p>
    <p style="margin:32px 0">
      <button class="share-btn" onclick="shareLoveBomb()">
        &#128140;&ensp;Send a love bomb to someone you love
      </button>
    </p>
    <p style="margin:16px 0">
      <button class="share-link-btn" onclick="copyLink()">
        &#128279;&ensp;Copy link
      </button>
    </p>
    <p style="font-size:0.9rem;color:#806070;margin-top:8px">No signup. No cost. No catch. Just love, passed forward.</p>
  </div>

  <!-- ‚ïê‚ïê‚ïê FINAL ‚ïê‚ïê‚ïê -->
  <div class="section" id="s8" style="margin-bottom:15vh">
    <div class="breathing-heart" style="font-size:3rem">&#10084;&#65039;</div>
    <p style="font-family:'Playfair Display',serif;font-size:clamp(1.2rem,3vw,1.6rem);font-style:italic;color:#ffb6c1;margin-bottom:24px">You were always loved.<br>Now someone made sure you know it.</p>
    <div class="love-declaration" style="font-size:clamp(1.6rem,4.5vw,2.8rem)">You Are Loved &#10084;</div>
    <p style="font-style:italic;color:#c090a8;margin-top:20px">Right now, someone is waiting to feel what you just felt.</p>
    <p style="font-style:italic;color:#a07888;margin-top:8px">Send it forward. Be the reason someone smiles today.</p>
    <p style="font-style:italic;color:#806070;margin-top:16px;font-size:0.9rem">And you ‚Äî you were always, always, always loved.</p>
    <p style="font-family:'Special Elite',cursive;color:#604050;margin-top:24px;font-size:0.75rem;letter-spacing:3px">MADE WITH NOTHING BUT LOVE</p>
  </div>

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SCRIPTS                                     -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
/* ‚îÄ‚îÄ Early Variation Detection ‚îÄ‚îÄ */
var currentVariationId = 'default';
var currentVariationConfig = LOVE_BOMB_VARIATIONS['default'];
(function detectVariationEarly() {
  var params = new URLSearchParams(window.location.search);
  var v = params.get('v') || 'default';
  currentVariationId = LOVE_BOMB_VARIATIONS[v] ? v : 'default';
  currentVariationConfig = LOVE_BOMB_VARIATIONS[currentVariationId];
})();

/* ‚îÄ‚îÄ Starfield ‚Äî twinkling stars background (magical layer) ‚îÄ‚îÄ */
(function initStarfield() {
  var starCanvas = document.getElementById('star-canvas');
  var sctx = starCanvas.getContext('2d');
  var stars = [];
  var STAR_COUNT = 120;

  function resizeStars() {
    starCanvas.width = window.innerWidth;
    starCanvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resizeStars);
  resizeStars();

  for (var i = 0; i < STAR_COUNT; i++) {
    stars.push({
      x: Math.random() * starCanvas.width,
      y: Math.random() * starCanvas.height,
      r: 0.5 + Math.random() * 1.5,
      phase: Math.random() * Math.PI * 2,
      speed: 0.005 + Math.random() * 0.015,
      color: Math.random() > 0.7
        ? [255, 182, 193]
        : Math.random() > 0.5
          ? [200, 180, 255]
          : [255, 255, 255],
    });
  }

  function animateStars() {
    sctx.clearRect(0, 0, starCanvas.width, starCanvas.height);
    for (var i = 0; i < stars.length; i++) {
      var s = stars[i];
      s.phase += s.speed;
      var alpha = 0.2 + Math.sin(s.phase) * 0.4 + 0.4;
      sctx.beginPath();
      sctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      sctx.fillStyle = 'rgba(' + s.color[0] + ',' + s.color[1] + ',' + s.color[2] + ',' + alpha + ')';
      sctx.fill();
      if (s.r > 1) {
        sctx.beginPath();
        sctx.arc(s.x, s.y, s.r * 2.5, 0, Math.PI * 2);
        sctx.fillStyle = 'rgba(' + s.color[0] + ',' + s.color[1] + ',' + s.color[2] + ',' + (alpha * 0.15) + ')';
        sctx.fill();
      }
    }
    requestAnimationFrame(animateStars);
  }
  animateStars();
})();

/* ‚îÄ‚îÄ Magical Floating Orbs ‚îÄ‚îÄ */
(function initOrbs() {
  var orbCount = 3;
  for (var i = 0; i < orbCount; i++) {
    var orb = document.createElement('div');
    orb.className = 'magic-orb';
    var size = 100 + Math.random() * 200;
    orb.style.width = size + 'px';
    orb.style.height = size + 'px';
    orb.style.left = (Math.random() * 80 + 10) + '%';
    orb.style.top = (Math.random() * 80 + 10) + '%';
    orb.style.animationDelay = (Math.random() * 5) + 's';
    orb.style.animationDuration = (6 + Math.random() * 6) + 's';
    document.body.appendChild(orb);
  }
})();

/* ‚îÄ‚îÄ Heart Particle System ‚îÄ‚îÄ */
var canvas = document.getElementById('heart-canvas');
var ctx = canvas.getContext('2d');
var W, H;
var hearts = [];
var musicMode = false;
var scrollProgress = 0;

var DEFAULT_HEART_COLORS = [
  [255,105,180], [255,69,100], [255,182,193],
  [238,130,238], [255,140,160], [255,200,220],
  [200,100,255], [255,80,120],  [255,220,230],
  [255,20,100],  [180,60,200],
];

var RAINBOW_HEART_COLORS = [
  [228,3,3],     [255,60,40],
  [255,140,0],   [255,170,50],
  [255,237,0],   [255,255,80],
  [0,128,38],    [0,180,80],
  [0,77,255],    [60,120,255],
  [117,7,135],   [180,60,220],
];

var COLORS = DEFAULT_HEART_COLORS.slice();

function setHeartColors(mode) {
  COLORS.length = 0;
  var src = mode === 'rainbow' ? RAINBOW_HEART_COLORS : DEFAULT_HEART_COLORS;
  for (var i = 0; i < src.length; i++) COLORS.push(src[i]);
}

if (currentVariationConfig && currentVariationConfig.heartColors === 'rainbow') {
  setHeartColors('rainbow');
}

function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

window.addEventListener('scroll', function() {
  var docHeight = document.documentElement.scrollHeight - window.innerHeight;
  scrollProgress = docHeight > 0 ? Math.min(1, window.scrollY / docHeight) : 0;
});

function drawHeart(cx, cy, size, angle, color, alpha) {
  ctx.save();
  ctx.translate(cx, cy);
  ctx.rotate(angle);
  ctx.globalAlpha = alpha;
  ctx.fillStyle = 'rgb(' + color[0] + ',' + color[1] + ',' + color[2] + ')';
  ctx.beginPath();
  var s = size;
  ctx.moveTo(0, -s * 0.35);
  ctx.bezierCurveTo(-s * 0.5, -s * 0.9, -s * 1.3, -s * 0.4, 0, s * 0.6);
  ctx.bezierCurveTo(s * 1.3, -s * 0.4, s * 0.5, -s * 0.9, 0, -s * 0.35);
  ctx.fill();
  ctx.globalAlpha = alpha * 0.3;
  ctx.fillStyle = 'rgb(' + Math.min(255,color[0]+60) + ',' + Math.min(255,color[1]+60) + ',' + Math.min(255,color[2]+60) + ')';
  ctx.beginPath();
  var gs = size * 0.5;
  ctx.moveTo(0, -gs * 0.35);
  ctx.bezierCurveTo(-gs * 0.5, -gs * 0.9, -gs * 1.3, -gs * 0.4, 0, gs * 0.6);
  ctx.bezierCurveTo(gs * 1.3, -gs * 0.4, gs * 0.5, -gs * 0.9, 0, -gs * 0.35);
  ctx.fill();
  ctx.restore();
}

function Heart(x, y, burst) {
  this.x = x || Math.random() * W;
  this.y = y || -20 - Math.random() * 100;
  this.size = 8 + Math.random() * 24;
  this.color = COLORS[Math.floor(Math.random() * COLORS.length)];
  this.angle = (Math.random() - 0.5) * 0.8;
  this.rotSpeed = (Math.random() - 0.5) * 0.03;
  this.vy = burst ? (Math.random() - 0.5) * 6 : 0.3 + Math.random() * 1.2;
  this.vx = burst ? (Math.random() - 0.5) * 6 : (Math.random() - 0.5) * 0.5;
  this.gravity = 0.02 + Math.random() * 0.01;
  this.opacity = 0.4 + Math.random() * 0.6;
  this.fadeSpeed = burst ? 0.008 + Math.random() * 0.005 : 0.0005;
  this.wobblePhase = Math.random() * Math.PI * 2;
  this.wobbleSpeed = 0.01 + Math.random() * 0.02;
  this.wobbleAmp = 0.3 + Math.random() * 0.5;
  this.burst = burst || false;
  this.life = 1;
}
Heart.prototype.update = function() {
  this.wobblePhase += this.wobbleSpeed;
  this.vx += Math.sin(this.wobblePhase) * this.wobbleAmp * 0.01;
  if (!this.burst) this.vy += this.gravity;
  else this.vy += this.gravity * 2;
  this.x += this.vx;
  this.y += this.vy;
  this.angle += this.rotSpeed;
  this.life -= this.fadeSpeed;
  if (this.y > H - this.size) {
    this.y = H - this.size;
    this.vy *= -0.4;
    this.vx *= 0.9;
  }
  if (this.x < this.size || this.x > W - this.size) {
    this.vx *= -0.7;
    this.x = Math.max(this.size, Math.min(W - this.size, this.x));
  }
  return this.life > 0 && this.y < H + 50;
};
Heart.prototype.draw = function() {
  drawHeart(this.x, this.y, this.size, this.angle, this.color, this.life * this.opacity);
};

function collide(a, b) {
  var dx = a.x - b.x;
  var dy = a.y - b.y;
  var dist = Math.sqrt(dx * dx + dy * dy);
  var minDist = (a.size + b.size) * 0.6;
  if (dist < minDist && dist > 0) {
    var nx = dx / dist;
    var ny = dy / dist;
    var overlap = minDist - dist;
    a.x += nx * overlap * 0.5;
    a.y += ny * overlap * 0.5;
    b.x -= nx * overlap * 0.5;
    b.y -= ny * overlap * 0.5;
    var dvx = a.vx - b.vx;
    var dvy = a.vy - b.vy;
    var dot = dvx * nx + dvy * ny;
    if (dot > 0) {
      a.vx -= dot * nx * 0.5;
      a.vy -= dot * ny * 0.5;
      b.vx += dot * nx * 0.5;
      b.vy += dot * ny * 0.5;
      a.rotSpeed += (Math.random() - 0.5) * 0.02;
      b.rotSpeed += (Math.random() - 0.5) * 0.02;
    }
  }
}

var spawnTimer = 0;
function animate() {
  ctx.clearRect(0, 0, W, H);
  spawnTimer++;
  var baseMusicRate = musicMode ? 2 : 4;
  var baseNormalRate = musicMode ? 4 : 12;
  var topRate = musicMode ? baseMusicRate : baseNormalRate;
  var bottomRate = musicMode ? 30 : 80;
  var spawnRate = Math.round(topRate + (bottomRate - topRate) * Math.pow(scrollProgress, 0.7));

  if (spawnTimer >= spawnRate) {
    spawnTimer = 0;
    hearts.push(new Heart());
    if (scrollProgress < 0.2 && musicMode) {
      hearts.push(new Heart());
    }
  }

  hearts = hearts.filter(function(h) { return h.update(); });

  for (var i = 0; i < hearts.length; i++) {
    for (var j = i + 1; j < Math.min(i + 8, hearts.length); j++) {
      collide(hearts[i], hearts[j]);
    }
  }

  if (musicMode) {
    var t = Date.now() * 0.001;
    var pulse = 0.02 + Math.sin(t * 2) * 0.01;
    ctx.fillStyle = 'rgba(255,105,180,' + pulse + ')';
    ctx.fillRect(0, 0, W, H);
  }

  hearts.forEach(function(h) { h.draw(); });
  requestAnimationFrame(animate);
}
animate();

document.addEventListener('click', function(e) {
  if (e.target.closest('button') || e.target.closest('.yt-container') || e.target.closest('.tap-to-hear')) return;
  for (var i = 0; i < 12; i++) {
    hearts.push(new Heart(e.clientX, e.clientY, true));
  }
});

document.addEventListener('touchstart', function(e) {
  if (e.target.closest('button') || e.target.closest('.yt-container') || e.target.closest('.tap-to-hear')) return;
  var t = e.touches[0];
  for (var i = 0; i < 12; i++) {
    hearts.push(new Heart(t.clientX, t.clientY, true));
  }
});

/* ‚îÄ‚îÄ Scroll Reveal ‚îÄ‚îÄ */
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(e) {
    if (e.isIntersecting) e.target.classList.add('visible');
  });
}, { threshold: 0.15 });
document.querySelectorAll('.section').forEach(function(s) { observer.observe(s); });

/* ‚îÄ‚îÄ Haptics Engine ‚Äî syncs vibration to song BPM ‚îÄ‚îÄ */
var hapticsInterval = null;
var hapticPulseEl = document.getElementById('haptic-pulse');

function startHaptics(bpm) {
  stopHaptics();
  if (!bpm) return;
  var beatMs = Math.round(60000 / bpm);
  var vibrateMs = Math.max(15, Math.min(50, Math.round(beatMs * 0.07)));

  function doBeat() {
    if (navigator.vibrate) {
      navigator.vibrate(vibrateMs);
    }
    if (hapticPulseEl) {
      hapticPulseEl.classList.add('active');
      setTimeout(function() { hapticPulseEl.classList.remove('active'); }, 150);
    }
  }

  doBeat();
  hapticsInterval = setInterval(doBeat, beatMs);
}

function stopHaptics() {
  if (hapticsInterval) {
    clearInterval(hapticsInterval);
    hapticsInterval = null;
  }
  try { if (navigator.vibrate) navigator.vibrate(0); } catch(e) {}
  if (hapticPulseEl) hapticPulseEl.classList.remove('active');
}

/* ‚îÄ‚îÄ Detonation Effect ‚Äî the "bomb" moment ‚îÄ‚îÄ */
function detonateLoveBomb() {
  var flash = document.createElement('div');
  flash.className = 'detonate-flash';
  document.body.appendChild(flash);
  setTimeout(function() { flash.remove(); }, 2000);

  for (var i = 0; i < 80; i++) {
    (function(idx) {
      setTimeout(function() {
        hearts.push(new Heart(
          W * 0.2 + Math.random() * W * 0.6,
          H * 0.2 + Math.random() * H * 0.6,
          true
        ));
      }, idx * 20);
    })(i);
  }

  if (navigator.vibrate) {
    navigator.vibrate([60, 20, 60, 20, 60, 20, 80, 40, 120, 60, 200]);
  }

  if (currentVariationConfig && currentVariationConfig.bpm) {
    setTimeout(function() {
      startHaptics(currentVariationConfig.bpm);
    }, 800);
  }
}

/* ‚îÄ‚îÄ YouTube Player ‚Äî variation-aware autoplay with ad-delay and loop ‚îÄ‚îÄ */
var ytPlayer = null;
var ytReady = false;
var userHasInteracted = false;
var audioUnlocked = false;
var unmuteReady = false;
var unmuteCountdownInterval = null;
var AD_GRACE_PERIOD_SEC = 30;

var tag = document.createElement('script');
tag.src = 'https://www.youtube.com/iframe_api';
document.head.appendChild(tag);

function getVideoConfig() {
  var cfg = currentVariationConfig || LOVE_BOMB_VARIATIONS['default'];
  return {
    videoId: cfg.videoId || 'NI6aOFI7hms',
    start: cfg.videoStart || 0,
  };
}

function updateSongInfo() {
  var el = document.getElementById('song-info');
  if (!el || !currentVariationConfig) return;
  var title = currentVariationConfig.songTitle;
  var artist = currentVariationConfig.songArtist;
  if (title && artist) {
    el.innerHTML = '&#9835; ' + artist + ' ‚Äî <em>' + title + '</em>';
  } else {
    el.textContent = '';
  }
}

function hideUnmuteControls() {
  var tapBtn = document.getElementById('tap-to-hear');
  var unmuteBtn = document.getElementById('unmute-btn');
  if (tapBtn) tapBtn.classList.add('hidden');
  if (unmuteBtn) unmuteBtn.style.display = 'none';
  if (unmuteCountdownInterval) {
    clearInterval(unmuteCountdownInterval);
    unmuteCountdownInterval = null;
  }
}

function showUnmuteControls() {
  var tapBtn = document.getElementById('tap-to-hear');
  if (tapBtn) tapBtn.classList.remove('hidden');
}

function startUnmuteCountdown() {
  var btn = document.getElementById('unmute-btn');
  var label = document.getElementById('unmute-label');
  if (!btn || !label) return;

  unmuteReady = false;
  btn.disabled = true;
  btn.classList.remove('ready');
  btn.style.display = '';
  var icon = btn.querySelector('.unmute-icon');
  if (icon) icon.textContent = '\uD83D\uDD07';

  var startTime = Date.now();
  label.innerHTML = 'Music in <span id="unmute-countdown">' + AD_GRACE_PERIOD_SEC + '</span>s';

  if (unmuteCountdownInterval) clearInterval(unmuteCountdownInterval);
  unmuteCountdownInterval = setInterval(function() {
    var elapsed = Math.floor((Date.now() - startTime) / 1000);
    var remaining = Math.max(0, AD_GRACE_PERIOD_SEC - elapsed);
    var cdEl = document.getElementById('unmute-countdown');
    if (cdEl) cdEl.textContent = remaining;
    if (remaining <= 0) {
      clearInterval(unmuteCountdownInterval);
      unmuteCountdownInterval = null;
      unmuteReady = true;
      btn.disabled = false;
      btn.classList.add('ready');
      if (icon) icon.textContent = '\uD83D\uDD0A';
      label.textContent = 'Turn on the love';
    }
  }, 500);
}

function tryUnmutePlayer() {
  if (!ytPlayer || !ytReady || audioUnlocked) return;
  try {
    ytPlayer.unMute();
    ytPlayer.setVolume(100);
    if (ytPlayer.isMuted && !ytPlayer.isMuted()) {
      audioUnlocked = true;
      hideUnmuteControls();
    }
  } catch(e) {}
}

function createPlayer() {
  var vc = getVideoConfig();
  ytPlayer = new YT.Player('yt-player', {
    height: '100%',
    width: '100%',
    videoId: vc.videoId,
    playerVars: {
      autoplay: 1,
      start: vc.start,
      mute: 1,
      loop: 1,
      playlist: vc.videoId,
      modestbranding: 1,
      rel: 0,
      playsinline: 1,
    },
    events: {
      onReady: function(event) {
        ytReady = true;
        var container = document.getElementById('yt-container');
        container.classList.add('active');
        event.target.mute();
        event.target.playVideo();
        musicMode = true;
        updateSongInfo();
        startUnmuteCountdown();

        setTimeout(function() {
          try {
            if (ytPlayer.isMuted()) {
              showUnmuteControls();
            } else {
              audioUnlocked = true;
              hideUnmuteControls();
              detonateLoveBomb();
            }
          } catch(e) {}
        }, 500);
      },
      onStateChange: function(e) {
        musicMode = (e.data === YT.PlayerState.PLAYING);
        if (e.data === YT.PlayerState.PLAYING) {
          if (userHasInteracted && !audioUnlocked) {
            tryUnmutePlayer();
          }
          if (audioUnlocked && !hapticsInterval && currentVariationConfig && currentVariationConfig.bpm) {
            startHaptics(currentVariationConfig.bpm);
          }
        } else {
          stopHaptics();
        }
      }
    }
  });
}

function loadVariationVideo() {
  if (!ytPlayer || !ytReady) return;
  var vc = getVideoConfig();
  audioUnlocked = false;
  unmuteReady = false;
  stopHaptics();
  try {
    ytPlayer.loadVideoById({ videoId: vc.videoId, startSeconds: vc.start });
    ytPlayer.mute();
    updateSongInfo();
    startUnmuteCountdown();
    showUnmuteControls();
  } catch(e) {}
}

window.onYouTubeIframeAPIReady = function() {
  createPlayer();
};

function onUserInteraction() {
  if (userHasInteracted) return;
  userHasInteracted = true;
  if (unmuteReady && ytPlayer && ytReady) {
    ytPlayer.unMute();
    ytPlayer.setVolume(100);
    ytPlayer.playVideo();
    audioUnlocked = true;
    hideUnmuteControls();
    detonateLoveBomb();
  }
}

document.getElementById('tap-to-hear').addEventListener('click', function(e) {
  e.stopPropagation();
  if (unmuteReady) {
    onUserInteraction();
  } else if (ytPlayer && ytReady) {
    ytPlayer.unMute();
    ytPlayer.setVolume(100);
    audioUnlocked = true;
    userHasInteracted = true;
    hideUnmuteControls();
    detonateLoveBomb();
  }
});

document.addEventListener('click', function(e) {
  if (e.target.closest('#unmute-btn') && unmuteReady && ytPlayer) {
    ytPlayer.unMute();
    ytPlayer.setVolume(100);
    audioUnlocked = true;
    userHasInteracted = true;
    hideUnmuteControls();
    detonateLoveBomb();
  }
});

document.addEventListener('scroll', function onFirstScroll() {
  if (unmuteReady) onUserInteraction();
  document.removeEventListener('scroll', onFirstScroll);
}, {passive: true});

/* ‚îÄ‚îÄ Love Bomb Counter ‚îÄ‚îÄ */
(function initCounter() {
  var LAUNCH_DATE = new Date('2025-06-01T00:00:00Z');
  var BASE_COUNT = 1300;
  var PRIMES = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47];

  function seededRandom(seed) {
    var t = seed + 0x6D2B79F5;
    t = Math.imul(t ^ (t >>> 15), t | 1);
    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
  }

  function calculateCount() {
    var now = new Date();
    var msPerDay = 86400000;
    var daysSinceLaunch = Math.max(0, Math.floor((now - LAUNCH_DATE) / msPerDay));
    var total = BASE_COUNT;

    for (var day = 0; day <= daysSinceLaunch; day++) {
      var seed = day * 31337 + 7919;
      var rand = seededRandom(seed);
      var progress = Math.min(1, day / 365);
      var primeIndex = Math.floor((1 - progress) * (PRIMES.length - 1));
      var prime = PRIMES[primeIndex];
      var maxDailyAdds = 4320;
      var dailyBase = 1 + (maxDailyAdds - 1) * Math.pow(progress, 3);
      var dailyIncrement = Math.floor((dailyBase / prime) * (0.6 + rand * 0.8));
      total += Math.max(1, dailyIncrement);
    }

    if (daysSinceLaunch > 0) {
      var progress = Math.min(1, daysSinceLaunch / 365);
      var maxPerMin = 3 * Math.pow(progress, 3);
      var minutesToday = now.getHours() * 60 + now.getMinutes();
      var seed = daysSinceLaunch * 99991 + minutesToday;
      var rand = seededRandom(seed);
      var intradayPrime = PRIMES[Math.floor(rand * 5)];
      var intradayAdds = Math.floor((minutesToday * maxPerMin) / intradayPrime);
      total += Math.max(0, intradayAdds);
    }

    return total;
  }

  function formatNumber(n) {
    return n.toLocaleString('en-US');
  }

  function updateCounter() {
    var el = document.getElementById('love-counter');
    if (el) {
      el.textContent = formatNumber(calculateCount());
    }
  }

  updateCounter();
  function scheduleNext() {
    var delay = 20000 + Math.random() * 20000;
    setTimeout(function() {
      updateCounter();
      scheduleNext();
    }, delay);
  }
  scheduleNext();
})();

/* ‚îÄ‚îÄ Variation System ‚Äî handles video, hearts, sculpture, haptics ‚îÄ‚îÄ */
(function initVariations() {
  var params = new URLSearchParams(window.location.search);
  var varId = currentVariationId;

  function applyVariation(id, isSwitch) {
    var c = LOVE_BOMB_VARIATIONS[id] || LOVE_BOMB_VARIATIONS['default'];
    currentVariationId = id;
    currentVariationConfig = c;

    var from = document.getElementById('var-from');
    var to = document.getElementById('var-to');
    var re = document.getElementById('var-re');
    var hookSub = document.getElementById('variation-hook-sub');
    var worldNote = document.getElementById('variation-world-note');
    if (from && c.telegramFrom) from.textContent = c.telegramFrom;
    if (to && c.telegramTo) to.textContent = c.telegramTo;
    if (re && c.telegramRe) re.textContent = c.telegramRe;
    if (hookSub) {
      hookSub.textContent = c.hookSub || '';
      hookSub.style.display = c.hookSub ? 'block' : 'none';
    }
    if (worldNote && c.worldPeaceNote) worldNote.textContent = c.worldPeaceNote;
    document.querySelectorAll('.variation-btn').forEach(function(btn) {
      btn.classList.toggle('active', btn.dataset.var === id);
    });

    /* Rainbow hearts for LGBTQ */
    if (c.heartColors === 'rainbow') {
      setHeartColors('rainbow');
      document.body.classList.add('rainbow-active');
    } else {
      setHeartColors('default');
      document.body.classList.remove('rainbow-active');
    }

    /* Philly LOVE sculpture */
    var sculpture = document.getElementById('love-sculpture');
    if (sculpture) {
      if (c.showLoveSculpture) {
        sculpture.classList.add('active');
      } else {
        sculpture.classList.remove('active');
      }
    }

    /* Song info */
    updateSongInfo();

    /* Load new video if switching */
    if (isSwitch) {
      loadVariationVideo();
    }

    /* Update URL */
    if (id !== (params.get('v') || 'default')) {
      var u = new URL(window.location.href);
      u.searchParams.set('v', id);
      window.history.replaceState({}, '', u.toString());
    }
  }

  var btns = document.getElementById('variation-btns');
  if (btns) {
    ['default','philly','nyc','usa','lgbtq','multilang'].forEach(function(id) {
      var c = LOVE_BOMB_VARIATIONS[id];
      if (!c) return;
      var b = document.createElement('button');
      b.className = 'variation-btn' + (id === varId ? ' active' : '');
      b.dataset.var = id;
      b.textContent = c.label;
      b.addEventListener('click', function() { applyVariation(id, true); });
      btns.appendChild(b);
    });
  }
  applyVariation(varId, false);
})();

/* ‚îÄ‚îÄ Share Functions ‚îÄ‚îÄ */
function shareLoveBomb() {
  var url = window.location.href;
  var text = 'I\u2019m sending you a love bomb because you deserve to know you\u2019re loved. \u{1F48C}\n\nThis is for you. Every word. Open it:\n\n';
  if (navigator.share) {
    navigator.share({ title: 'You\u2019ve Been Love Bombed', text: text, url: url });
  } else {
    navigator.clipboard.writeText(text + url).then(function() {
      var btn = document.querySelector('.share-btn');
      btn.textContent = '\u{1F48C} Copied! Now send it to someone you love.';
      setTimeout(function() { btn.innerHTML = '\u{1F48C}&ensp;Send a love bomb to someone you love'; }, 3000);
    });
  }
  for (var i = 0; i < 25; i++) {
    (function(idx) {
      setTimeout(function() {
        hearts.push(new Heart(Math.random()*W, H, true));
      }, idx * 40);
    })(i);
  }
}

function copyLink() {
  var url = window.location.href;
  navigator.clipboard.writeText(url).then(function() {
    var btn = document.querySelector('.share-link-btn');
    btn.textContent = '\u{1F517} Copied!';
    setTimeout(function() { btn.innerHTML = '\u{1F517}&ensp;Copy link'; }, 2000);
  });
}

/* ‚îÄ‚îÄ Sparkles on mouse move ‚îÄ‚îÄ */
var sparkleTimer = 0;
document.addEventListener('mousemove', function(e) {
  sparkleTimer++;
  if (sparkleTimer % 3 !== 0) return;
  var s = document.createElement('div');
  s.className = 'sparkle';
  s.style.left = e.clientX + 'px';
  s.style.top = e.clientY + 'px';
  var c = COLORS[Math.floor(Math.random()*COLORS.length)];
  s.style.background = 'rgb(' + c[0] + ',' + c[1] + ',' + c[2] + ')';
  s.style.width = (2 + Math.random() * 4) + 'px';
  s.style.height = s.style.width;
  document.body.appendChild(s);
  setTimeout(function() { s.remove(); }, 3000);
});

/* ‚îÄ‚îÄ Love Sent Timestamp ‚Äî shows when the love arrived ‚îÄ‚îÄ */
(function initTimestamp() {
  var el = document.getElementById('love-sent-time');
  if (!el) return;
  var now = new Date();
  var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
  var h = now.getHours();
  var ampm = h >= 12 ? 'PM' : 'AM';
  var h12 = h % 12 || 12;
  var min = now.getMinutes();
  var minStr = min < 10 ? '0' + min : '' + min;
  el.textContent = 'LOVE DELIVERED: ' + months[now.getMonth()] + ' ' + now.getDate() + ', ' + now.getFullYear() + ' AT ' + h12 + ':' + minStr + ' ' + ampm;
})();

/* ‚îÄ‚îÄ Bounce arrow animation ‚îÄ‚îÄ */
var style = document.createElement('style');
style.textContent = '@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(8px)}}';
document.head.appendChild(style);

/* ‚îÄ‚îÄ Staggered section reveal for enchanted feel ‚îÄ‚îÄ */
(function initStaggeredReveal() {
  var sections = document.querySelectorAll('.section');
  sections.forEach(function(section) {
    var cards = section.querySelectorAll('.affirmation-card');
    if (cards.length > 0) {
      var cardObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            cards.forEach(function(card, i) {
              setTimeout(function() {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
              }, i * 120);
            });
          }
        });
      }, { threshold: 0.2 });
      cardObserver.observe(section);
      cards.forEach(function(card) {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      });
    }
  });
})();
</script>

</body>
</html>
